<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      {% block title%}{{title}}{% endblock %}
    </title>
    <meta name="author" content="Datopian">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" media="screen" href="/static/stylesheets/app.css">
    <link rel="shortcut icon" href="/static/img/favicon.ico">
    {% if dataset %}
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.css">
    {% endif %}
    {% block styles %}{% endblock %}
  </head>
  <body class="{% block bodyclass %}{{bodyclass}}{% endblock %}">
    <div id="page" class="flex flex-col justify-between min-h-screen">
      <div>
        <!-- Page header -->
        <header>
          <div class="container mx-auto lg:flex justify-between p-gutter items-center relative">
            <a href="/" class="flex content-center h-8 mr-16">
              <img src="/static/img/logo.svg" alt="Open Data DK" class="lg:h-6 max-w-full" />
            </a>

            <button id="nav-toggle" class="absolute top-0 right-0 p-gutter outline-none focus:outline-none focus:text-secondary lg:hidden invisible">
              <svg class="w-8 h-8 fill-current">
                <use xlink:href="#menu" />
              </svg>
            </button>

            <nav class="main-nav mt-4 py-2 lg:my-2 bg-white right-0 z-10 lg:relative">
              <ul class="lg:flex md:text-xl lg:text-2xl">
                <li class="main-nav_item lg:mx-3">
                  <a class="main-nav_link" href="/blog">{{__('Blog')}}</a>
                </li>
                <li class="main-nav_item lg:mx-3">
                  <a class="main-nav_link" href="/knowledge">Viden om</a>
                </li>
                <li class="main-nav_item lg:mx-3">
                  <a class="main-nav_link" href="/search">Datasæt<svg class="hidden w-3 h-3 text-secondary fill-current ml-1 lg:block"><use xlink:href="#dropdown" /></svg></a>
                  <ul class="main-nav_subnav" aria-label="submenu">
                    <li>
                      <a class="main-nav_link" href="/organization">Organisationer</a>
                    </li>
                    <li>
                      <a class="main-nav_link" href="/collections">Grupper</a>
                    </li>
                  </ul>
                </li>
                <li class="main-nav_item lg:ml-3">
                  <a class="main-nav_link" href="/about">Om <svg class="hidden w-3 h-3 text-secondary fill-current ml-1 lg:block"><use xlink:href="#dropdown" /></svg></a>
                  <ul class="main-nav_subnav" aria-label="submenu">
                    {% for item in aboutPages %}
                    <li>
                      <a class="main-nav_link" href="/{{ item.slug }}">{{ item.title }}</a>
                    </li>
                    {% endfor %}
                  </ul>
                </li>
                <li class="flex items-center text-primary lg:ml-6">
                  <a id="search-link" href="/search">
                    <span class="main-nav_link hidden">Søg datasæt</span>
                    <svg class="main-nav_search-toggle-icon w-8 h-8 hover:fill-secondary outline-none" data-toggle="show"><use xlink:href="#search" /></svg>
                    <svg class="main-nav_search-toggle-icon w-8 h-6 hover:fill-secondary outline-none" data-toggle="hide"><use xlink:href="#cross" /></svg>
                  </a>
                  <form action="/search" method="GET" class="main-nav_search w-full px-6 py-2 lg:p-0 lg:absolute lg:left-0 lg:right-0 lg:pr-12 lg:pointer-events-none" id="header-search">
                    <input name="q" type="text" class="border-2 border-solid border-gray-200 px-3 py-2 lg:px-4 lg:py-3 lg:text-xl outline-none focus:border-secondary w-full pointer-events-auto" placeholder="Søg" id="header-search-input">
                  </form>

                </li>
              </ul>
            </nav>
          </div>
        </header>
        <!-- End of page header -->

        {% block content %}{{content}}{% endblock %}
      </div>

      <!-- Footer -->
      <footer class="site-footer bg-primary text-white-75 mt-10 py-gutter text-sm">
        <div class="container mx-auto md:flex">
          <div class="px-gutter md:p-gutter md:w-1/3 md:flex flex-col justify-between">
            <a class="block w-24 mb-4 text-white-75 hover:text-white" href="https://ckan.org/">
              <span>Powered by</span>
              {% include "./partials/ckan-logo.svg" %}
            </a>

            <p>
              Copyright 2015 Opendata.dk
            </p>
          </div>

          <div class="px-gutter pt-gutter md:p-gutter md:w-1/3">
            <h4 class="site-footer_heading">
              Generelle henvendelser om fx use-cases, foreningen og medlemsskab
            </h4>
            <p>
              <a href="mailto:info@opendata.dk" class="site-footer_link">info@opendata.dk</a> 
            </p>
            <h4>
              Henvendelser til hele bestyrelsen 
            </h4>
            <p>
              <a href="mailto:council@opendata.dk" class="site-footer_link">council@opendata.dk</a>
            </p>
            <h4>
              Presseforespørgsler, henvendelser om sitet www.opendata.dk, arrangementer og events etc.
            </h4>
            <p>
              <a href="mailto:kommunikation@opendata.dk" class="site-footer_link">kommunikation@opendata.dk</a>
            </p>
          </div>

          <div class="px-gutter md:p-gutter md:w-1/3">
            <h4>
              Henvendelser om datasæt, behov og muligheder
            </h4>
            <p>
              <a href="mailto:data@opendata.dk" class="site-footer_link">data@opendata.dk</a>
            </p>
            <h4>
                Henvendelser om portalen portal.opendata.dk.
            </h4>
            <p>
              <a href="mailto:teknik@opendata.dk" class="site-footer_link">teknik@opendata.dk</a>
            </p>
            <div>
              <p>Open Data DK | <a href="mailto:info@opendata.dk" class="site-footer_link">info@opendata.dk</a> | Hack Kampmanns Plads 2 | 8000 Aarhus C
            </div>

            <ul class="flex">
              <li>
                <a target="_blank" href="https://www.linkedin.com/company/open-data-dk" class="site-footer_link"><svg viewbox="0 0 512 512" style="height: 40px;">
               <path d="M186.4 142.4c0 19-15.3 34.5-34.2 34.5 -18.9 0-34.2-15.4-34.2-34.5 0-19 15.3-34.5 34.2-34.5C171.1 107.9 186.4 123.4 186.4 142.4zM181.4 201.3h-57.8V388.1h57.8V201.3zM273.8 201.3h-55.4V388.1h55.4c0 0 0-69.3 0-98 0-26.3 12.1-41.9 35.2-41.9 21.3 0 31.5 15 31.5 41.9 0 26.9 0 98 0 98h57.5c0 0 0-68.2 0-118.3 0-50-28.3-74.2-68-74.2 -39.6 0-56.3 30.9-56.3 30.9v-25.2H273.8z"></path>
              </svg></a>
              </li>
              <li>
                <a target="_blank" href="https://twitter.com/OpenDataDK" class="site-footer_link"> <svg viewbox="0 0 512 512" style="height: 40px;">
               <path d="M419.6 168.6c-11.7 5.2-24.2 8.7-37.4 10.2 13.4-8.1 23.8-20.8 28.6-36 -12.6 7.5-26.5 12.9-41.3 15.8 -11.9-12.6-28.8-20.6-47.5-20.6 -42 0-72.9 39.2-63.4 79.9 -54.1-2.7-102.1-28.6-134.2-68 -17 29.2-8.8 67.5 20.1 86.9 -10.7-0.3-20.7-3.3-29.5-8.1 -0.7 30.2 20.9 58.4 52.2 64.6 -9.2 2.5-19.2 3.1-29.4 1.1 8.3 25.9 32.3 44.7 60.8 45.2 -27.4 21.4-61.8 31-96.4 27 28.8 18.5 63 29.2 99.8 29.2 120.8 0 189.1-102.1 185-193.6C399.9 193.1 410.9 181.7 419.6 168.6z"></path>
               </svg></a>
              </li>
            </ul>

          </div>
        </div>
      </footer>
      <!-- end of footer -->
    </div>

    <div class="hidden">
      {% include "./partials/symbol/svg/sprite.symbol.svg" %}
    </div>

    <script>
      document.cookie = 'defaultLocale=' + 'da';
      // nav
      var navToggle = document.getElementById("nav-toggle");
      var navTarget = navToggle.nextElementSibling;

      // show toggle
      navToggle.classList.remove("invisible");

      // hide nav
      navTarget.setAttribute("data-expanded", "false");

      // toggle nav
      navToggle.onclick = function() {
        let expanded = navToggle.getAttribute('aria-expanded') === 'true' || false;
        navToggle.setAttribute('aria-expanded', !expanded);
        navTarget.setAttribute("data-expanded", !expanded);
      }


      // search
      // replace link with a button
      var searchLink = document.getElementById("search-link");
      var searchButton = document.createElement("button");
      var searchForm = document.getElementById("header-search");
      searchButton.setAttribute("class", "main-nav_search-toggle");
      searchButton.setAttribute("aria-expanded", "false");

      while (searchLink.childNodes.length > 0) {
        searchButton.appendChild(searchLink.childNodes[0]);
      }

      searchLink.replaceWith(searchButton);

      // button toggles form
      searchButton.onclick = function() {
        let expanded = searchButton.getAttribute('aria-expanded') === 'true' || false;
        searchButton.setAttribute('aria-expanded', !expanded);
        searchForm.setAttribute("data-expanded", !expanded);

        if (!expanded) {
          document.getElementById("header-search-input").focus();
        }
      }

    </script>
    {% block scripts %}{% endblock %}
  </body>
</html>
